<!doctype html>
<head>
    <title>Music Queue</title>

    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="http://localhost:8888/socket.io/socket.io.js"></script>
    <script src="/vue/vue.js"></script>
    <script src="js/vue.js" defer></script>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
<div class="container">
    <div id="login" v-show="login">
        <div class="row" id="content">
            <div class="col">
                <h3 class="text-center">Start a music queue!</h3>
                <a href="/login" class="btn btn-primary" v-on:click="authenticate">Log in with Spotify</a>
            </div>
            <div class="col">
                <h3 class="text-center">... Or join a Music Queue</h3>
                <input type="text" class="form-control" placeholder="Enter a code: XXXX" aria-label="Music code">
            </div>
        </div>
    </div>

    <div id="loggedin" v-show="!login">
        <div id="user-profile" class="row">
            <div class="col">
                <h1>Logged in as {{ name }}</h1>
                <h3>Email: {{ email }}</h3>
            </div>
        </div>
        <div id="oauth" class="row">
            <div class="col">
                <h3 class="text-overflow">Access token: {{ access_token }}</h3>
                <h3 class="text-overflow">Refresh token: {{ refresh_token }}</h3>
                <button class="btn btn-primary" id="obtain-new-token" v-on:click="newToken">Obtain new token using the refresh token</button>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <h3 class="text-center">Music Queue: XXXX</h3>
                <input v-model="searchInput" type="text" class="form-control" placeholder="Search for music to queue" aria-label="Music search">
                <button class="btn btn-primary" v-on:click="search(searchInput)">Search</button><br>
                <ul>
                    <li v-for="result in searchResult">
                        Track: {{ result.track }}. <br>
                        Artist: {{ result.artist }}. <br>
                        Image: {{ result.cover }}
                    </li>
                </ul>
                <!-- TODO: insert dropdown -->

                <div v-for="track in queue">
                    <hr>
                    <div class="row">
                        <div class="col">
                            { track.cover }
                        </div>
                        <div class="col-7">
                            { track.name }<br>
                            { track.artist }
                        </div>
                        <div class="col">
                            <div class="row">
                                <button class="btn btn-sm float-right" id="like" v-on:click="">Like</button>
                            </div>
                            <div class="row">
                                <button class="btn btn-sm float-right" id="dislike" v-on:click="">Dislike</button>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>


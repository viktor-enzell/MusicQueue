<!doctype html>
<head>
    <title>Music Queue</title>

    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="http://localhost:8888/socket.io/socket.io.js"></script>
    <script src="/vue/vue.js"></script>
    <script src="js/vue.js" defer></script>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
<div class="container">
    <div id="login" v-show="login">
        <div class="row" id="content">
            <div class="col">
                <h2 class="text-center">Music Queue</h2>
                <div class="row">
                    <div class="col text-center">
                        <h3>Start a party</h3>
                        <a href="/login" class="btn btn-primary" v-on:click="authenticate">Log in with Spotify</a>
                    </div>
                    <div class="col text-center">
                        <h3>Join an existing party</h3>
                        <input type="text" class="form-control" placeholder="Enter a code: XXXX" aria-label="Music code">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="loggedin" v-show="!login">
        <button class="btn btn-sm" v-on:click="showUserInfo = !showUserInfo">Account info</button>
        <div v-show="showUserInfo">
            <div id="user-profile" class="row">
                <div class="col">
                    <h1>Logged in as {{ name }}</h1>
                    <h3>Email: {{ email }}</h3>
                </div>
            </div>
            <div id="oauth" class="row">
                <div class="col">
                    <h3 class="text-overflow">Access token: {{ access_token }}</h3>
                    <h3 class="text-overflow">Refresh token: {{ refresh_token }}</h3>
                    <button class="btn btn-primary" id="obtain-new-token" v-on:click="newToken">Obtain new token using the refresh token</button>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <h3 class="text-center">Music Queue: XXXX</h3>
                <div v-show="currentSong !== ''">
                    <div class="row">
                        <div class="col-1">
                            <img class="albumCoverSearch" v-bind:src="currentSong.cover" />
                        </div>
                        <div class="col-9 float-right">
                            Track: {{ currentSong.track }} <br>
                            Artist: {{ currentSong.artist }}
                        </div>
                        <div class="col text-right">
                            <button v-if="playing" class="btn btn-sm" id="pause" v-on:click="pause">Pause</button>
                            <button v-else class="btn btn-sm" id="play" v-on:click="play">Play</button>
                        </div>
                    </div>
                    <hr>
                </div>
                <input v-model="searchInput" v-bind:onchange="search(searchInput)" type="text" class="form-control" placeholder="Search for music to queue" aria-label="Music search">
                <div v-show="!showQueue" v-for="result in searchResult">
                    <hr>
                    <div class="row">
                        <div class="col-1">
                            <img class="albumCoverSearch" v-bind:src="result.cover" />
                        </div>
                        <div class="col-10">
                            Track: {{ result.track }} <br>
                            Artist: {{ result.artist }}
                        </div>
                        <div class="col-1">
                            <button class="btn btn-sm float-right" id="add" v-on:click="queueSong(result)">Add to queue</button>
                        </div>
                    </div>
                </div>
                <div v-show="showQueue" v-for="song in queue">
                    <hr>
                    <div class="row">
                        <div class="col-1">
                            <img class="albumCoverSearch" v-bind:src="song.cover" />
                        </div>
                        <div class="col-9 float-right">
                            Track: {{ song.track }} <br>
                            Artist: {{ song.artist }}
                        </div>
                        <div class="col text-right">
                            <button class="btn btn-sm" id="like" v-on:click="">Like</button>
                            <button class="btn btn-sm" id="dislike" v-on:click="">Dislike</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>

